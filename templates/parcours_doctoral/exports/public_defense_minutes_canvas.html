{% extends "parcours_doctoral/exports/base_pdf.html" %}
{% load doctorate_enums i18n parcours_doctoral strings %}

{% comment "License" %}
  * OSIS stands for Open Student Information System. It's an application
  * designed to manage the core business of higher education institutions,
  * such as universities, faculties, institutes and professional schools.
  * The core business involves the administration of students, teachers,
  * courses, programs and so on.
  *
  * Copyright (C) 2015-2025 Universit√© catholique de Louvain (http://www.uclouvain.be)
  *
  * This program is free software: you can redistribute it and/or modify
  * it under the terms of the GNU General Public License as published by
  * the Free Software Foundation, either version 3 of the License, or
  * (at your option) any later version.
  *
  * This program is distributed in the hope that it will be useful,
  * but WITHOUT ANY WARRANTY; without even the implied warranty of
  * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  * GNU General Public License for more details.
  *
  * A copy of this license - GNU General Public License - is available
  * at the root of the source code of this program.  If not,
  * see http://www.gnu.org/licenses/.
{% endcomment %}

{% block extra_head %}
  <style>
    #public-defense-result {
      margin-left: 2em;
    }

    #public-defense-result > div > div {
      margin-left: 2em;
      margin-bottom: 1em;
    }

    #public-defense-result label {
      display: inline;
      font-weight: normal;
    }

    #public-defense-result input[type="checkbox"] {
      float: left;
      height: 1em;
      width: 1em;
      display: inline-block;
      border: #444 1px solid;
      margin-top: 0.3em;
    }

    p {
      margin-top: 1.5em;
    }

    #signatures td {
      display: flex;
      align-items: center;
      min-height: 4em;
    }
  </style>
{% endblock %}
{% block content %}
  <div class="container">
    <div id="title">
      <h1>{% translate "Public defence minutes" %}</h1>
      <h2>
        {% translate "To be signed by the exam board" %}
        <br>
        {% translate "To be submitted to the CDD administrator" %}
      </h2>
    </div>

    {% if parcours_doctoral.genre_doctorant == "F" %}
      {% translate "PhD student" as student_title context "female gender" %}
    {% elif parcours_doctoral.genre_doctorant == "H" %}
      {% translate "PhD student" as student_title context "male gender" %}
    {% else %}
      {% translate "PhD student" as student_title context "gender" %}
    {% endif %}
    {% concat parcours_doctoral.nom_doctorant " " parcours_doctoral.prenom_doctorant as full_name %}

    {% field_data student_title full_name inline=True css_class='fw-bold' %}

    {% field_data _("Noma") parcours_doctoral.noma_doctorant inline=True css_class='fw-bold' %}

    {% if parcours_doctoral.cotutelle.cotutelle %}
      {% get_superior_institute_name parcours_doctoral.cotutelle.institution as institute_name %}
      <span class="underline-text as-field-data">
        {% blocktranslate trimmed with institute_name=institute_name|default:parcours_doctoral.cotutelle.autre_institution_nom %}
          Thesis completed under joint supervision with {{ institute_name }}
        {% endblocktranslate %}
      </span>
    {% endif %}

    <p>
      {% blocktranslate trimmed with training_name=parcours_doctoral.formation.intitule %}
        We, the undersigned members of the PhD Thesis Exam Board in {{ training_name }} for
      {% endblocktranslate %}
    </p>

    <ul class="fw-bold">
      {% for jury_member in jury.membres %}
        <li>
          {{ jury_member.nom }} {{ jury_member.prenom }}
          {% if not jury_member.membre_ucl %}
            {% if jury_member.institution %}- {{ jury_member.institution }}{% endif %}
            {% if jury_member.ville %} - {{ jury_member.ville }}{% endif %}
            {% if jury_member.pays %} - {{ jury_member.pays }}{% endif %}
          {% endif %}
          {% if jury_member.role != 'MEMBRE' %}
            - {{ jury_member.role|enum_display:'RoleJury' }}{% if jury_member.est_promoteur %} {% translate 'and supervisor' %}
          {% elif jury_member.est_promoteur %}
            - {% translate 'Supervisor' %}
          {% endif %}
          {% endif %}
        </li>
      {% endfor %}
    </ul>

    <p>
      {% blocktranslate trimmed with public_defense_date=public_defense.date_heure|date thesis_title=jury.titre_propose %}
        having attended the student's {{ public_defense_date }} oral presentation of the results of their research work
        that led to the thesis entitled: <strong>{{ thesis_title }}</strong>;
      {% endblocktranslate %}
    </p>

    <p>
      {% translate 'the 120 credits (writing of a thesis) required for the granting of the PhD academic degree have been acquired by the person concerned;' %}<br>
      {% translate 'the 60 credits of "doctoral training" (decree of 7 November 2013) have been acquired by the person concerned;' %}<br>
      {% translate 'the conditions of the study programme have been satisfied;' %}<br>
      {% translate 'the conditions for admission to the programme have been met and the candidate has been duly enrolled;' %}
      {% if has_additional_training %}
        {% translate 'the credits for additional training have been obtained;' %}
      {% endif %}
    </p>

    <p>
      {% translate 'we hereby certify the successful completion of the doctoral programme and validate the obtaining of the minimum of 180 credits required for the granting of the PhD academic degree.' %}
    </p>

    <p class="fst-italic">
      <small>
        {% blocktranslate trimmed %}
          Note: if necessary, an absent person shall send the chair
          a written report prior to the meeting, setting out their reasoned opinion on the value of the thesis and a list
          of questions they wish to ask the student.
        {% endblocktranslate %}
      </small>
    </p>

    <div class="avoid-break-inside">
      <div class="d-flex py-2 ps-0">
        <div>{% translate "Concluded in" %}</div>
        <div class="solid-line" style="flex: 2;"></div>
        <div>{% translate "on" %}</div>
        <div class="solid-line" style="flex: 1;"></div>
      </div>


      <table id="signatures" class="table table-bordered caption-top">
        <caption>
          <span class="fw-bold text-uppercase text-black">{% translate "Signatures" %}</span>
        </caption>
        <thead>
        <tr>
          <th>{% translate "Exam Board Members" %}</th>
        </tr>
        </thead>
        <tbody>
        {% for jury_member in jury.membres %}
          <tr>
            <td>
            <span>
              {{ jury_member.nom }} {{ jury_member.prenom }} - {{ jury_member.role|enum_display:'RoleJury' }}
            </span>
            </td>
          </tr>
        {% endfor %}
        </tbody>
      </table>
    </div>

    <div style="break-before: page">
      <span class="list-title">
        {% translate "Appendices:" %}
      </span>
      <ul>
        <li>{% translate "reasoned opinion and list of questions asked by any exam board members who may have been absent due to force majeure." %}</li>
      </ul>
    </div>
  </div>
{% endblock %}
